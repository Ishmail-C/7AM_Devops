pipeline {
    stages {
        stage('Build Docker Image') {
            steps {
            sh '''
			docker image build -t apache /mywork/git/7AM_Devops/docker/apache
			 '''
            }
        }
        stage('Deploy Docker Image') {
            steps {
                script{ 
                       withCredentials([string(credentialsId: 'manoj14061996', variable: 'dockerhubpwd')]) {
                           
                        sh 'docker login -u devopshint -p ${dockerhubpwd}'
                      }
                      sh '''
                      docker image tag apache:latest manoj14061996/apache:latest
                      docker push manoj14061996/apache:latest
                      '''
                      
                }
            }
        }
    }
}
 

